#include <Arduino.h>

bool robotOn = false;
const int motor1pin1 = 2;
const int motor1pin2 = 3;
const int motor2pin1 = 4;
const int motor2pin2 = 5;
const int motor3pin1 = 8;
const int motor3pin2 = 9;
const int motor4pin1 = 6;
const int motor4pin2 = 7;
const int photoResistorPin = A1;

void setup() {
  Serial.begin(9600);
  pinMode(motor1pin1, OUTPUT);
  pinMode(motor1pin2, OUTPUT);
  pinMode(motor2pin1, OUTPUT);
  pinMode(motor2pin2, OUTPUT);
  pinMode(motor3pin1, OUTPUT);
  pinMode(motor3pin2, OUTPUT);
  pinMode(motor4pin1, OUTPUT);
  pinMode(motor4pin2, OUTPUT);
  pinMode(photoResistorPin, INPUT);
}


void loop() {
  int val = analogRead(photoResistorPin);
  int speed = 150;
  bool powered = val > 700;

  if (powered && !robotOn) {
    dance(speed);
    delay(1000);
    robotOn = true;

  }

  Serial.println(val);
  delay(100);
}

// analogWrite was digitalWrite
// spped = HIGH, 0 = LOW

void dance(int speed) {
  moveForward(speed);
  delay(1000);
  moveBackward(speed);
  delay(1000);
  turnLeft(speed);
  delay(1000);
  turnRight(speed);
  delay(1000);
  TankTurnRight(speed);
  delay(1000);
  TankTurnLeft(speed);
  delay(1000);
}

// Move all motors forward
void moveForward(int speed) {
  analogWrite(motor1pin1, speed);
  analogWrite(motor1pin2, 0);
  analogWrite(motor2pin1, speed);
  analogWrite(motor2pin2, 0);
  analogWrite(motor3pin1, speed);
  analogWrite(motor3pin2, 0);
  analogWrite(motor4pin1, speed);
  analogWrite(motor4pin2, 0);
}

// Move all motors backward
void moveBackward(int speed) {
  analogWrite(motor1pin1, 0);
  analogWrite(motor1pin2, speed);
  analogWrite(motor2pin1, 0);
  analogWrite(motor2pin2, speed);
  analogWrite(motor3pin1, 0);
  analogWrite(motor3pin2, speed);
  analogWrite(motor4pin1, 0);
  analogWrite(motor4pin2, speed);
}

// Turning to the right by moving motors 1 and 3
void turnRight(int speed) {
  analogWrite(motor1pin1, speed);
  analogWrite(motor1pin2, 0);
  analogWrite(motor2pin1, 0);
  analogWrite(motor2pin2, 0);
  analogWrite(motor3pin1, speed);
  analogWrite(motor3pin2, 0);
  analogWrite(motor4pin1, 0);
  analogWrite(motor4pin2, 0);
}

// Turning to the right by moving motors 2 and 4
void turnLeft(int speed) {
  analogWrite(motor1pin1, 0);
  analogWrite(motor1pin2, 0);
  analogWrite(motor2pin1, speed);
  analogWrite(motor2pin2, 0);
  analogWrite(motor3pin1, 0);
  analogWrite(motor3pin2, 0);
  analogWrite(motor4pin1, speed);
  analogWrite(motor4pin2, 0);
}

// Stop all motors
void stopMove(int speed) {
  analogWrite(motor1pin1, 0);
  analogWrite(motor1pin2, 0);
  analogWrite(motor2pin1, 0);
  analogWrite(motor2pin2, 0);
  analogWrite(motor3pin1, 0);
  analogWrite(motor3pin2, 0);
  analogWrite(motor4pin1, 0);
  analogWrite(motor4pin2, 0);
}
//Turning Motors 1 and 3 forward, Turning Motors 2 and 4 backward
void TankTurnRight(int speed) {
  analogWrite(motor1pin1, speed);
  analogWrite(motor1pin2, 0);
  analogWrite(motor2pin1, 0);
  analogWrite(motor2pin2, speed);
  analogWrite(motor3pin1, speed);
  analogWrite(motor3pin2, 0);
  analogWrite(motor4pin1, 0);
  analogWrite(motor4pin2, speed);
}

//Turning Motors 1 and 3 backward, Turning Motors 2 and 4 forward
void TankTurnLeft(int speed) {
  analogWrite(motor1pin1, 0);
  analogWrite(motor1pin2, speed);
  analogWrite(motor2pin1, speed);
  analogWrite(motor2pin2, 0);
  analogWrite(motor3pin1, 0);
  analogWrite(motor3pin2, speed);
  analogWrite(motor4pin1, speed);
  analogWrite(motor4pin2, 0);
}
